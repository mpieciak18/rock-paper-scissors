<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Rock, Paper, Scissors</title>
    </head>
    <script>
        function computerPlay() {
            let choice = Math.random();
            if (choice <= 0.333) {
                return "Rock";
            } else if (choice > 0.333 && choice <= 0.666) {
                return "Paper";
            } else {
                return "Scissors";
            }
        };
        function evalRound(playerSelection, computerSelection, playerOutcome) {
            if (playerOutcome === "win") {
                return "You win! " + playerSelection + " beats " + computerSelection + "!";
            } else if (playerOutcome === "lose") {
                return "You lose! " + computerSelection + " beats " + playerSelection + "!";
            } else if (playerOutcome === "tie") {
                return "You tied! Both of you played " + playerSelection + "!";
            } else {
                return null;
            }
        };
        function evalGame(playerScore, computerScore) {
            if (playerScore > computerScore) {
                return "Congratulations! You won the game.";
            } else if (computerScore > playerScore) {
                return "Sorry, you lost the game.";
            } else {
                return "You tied with your opponent!";
            };
        }
        let playerOutcome;
        function playRound(playerSelection, computerSelection) {
            if (playerSelection == "Rock" && computerSelection == "Paper"
                || playerSelection == "Paper" && computerSelection == "Scissors"
                || playerSelection == "Scissors" && computerSelection == "Rock") {
                    playerOutcome = "lose";
                    return evalRound(playerSelection, computerSelection, "lose");
            } else if (playerSelection == "Paper" && computerSelection == "Rock"
                || playerSelection == "Scissors" && computerSelection == "Paper"
                || playerSelection == "Rock" && computerSelection == "Scissors") {
                    playerOutcome = "win";
                    return evalRound(playerSelection, computerSelection, "win");
            } else {
                playerOutcome = "tie";
                return evalRound(playerSelection, computerSelection, "tie");
            }
        };
        function playerPlay() {
            let choice = prompt("What do you want to play: Rock, Paper, or Scissors?");
            lowCaseChoice = choice.toLowerCase();
            capChoice = lowCaseChoice.charAt(0).toUpperCase() + lowCaseChoice.slice(1);
            if (capChoice != "Rock" && capChoice != "Paper" && capChoice != "Scissors") {
                alert("\"" + capChoice + "\" is an invalid response: you need to choose \"Rock\", \"Paper\", or \"Scissors\"!");
                return playerPlay();
            } else {
                return capChoice;
            }
        };
        function game() {
            let playerScore = 0;
            let computerScore = 0;
            alert("Let's play 5 rounds of rock, paper, scissors!");
            let i;
            for (i = 1; i < 6; i++) {
                let playerChoice = playerPlay();
                let computerChoice = computerPlay();
                let result = "Round " + i + " outcome: \n" + playRound(playerChoice, computerChoice);
                if (playerOutcome == "win") {
                    playerScore += 1;
                } else {
                    computerScore += 1;
                };
                alert(result);
            };
            alert(evalGame(playerScore, computerScore));
        };
        game();
    </script>
</html>